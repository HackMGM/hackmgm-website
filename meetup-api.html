<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Bootstrap 101 Template</title>

    <!-- Bootstrap -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->
    <link rel="stylesheet" href="./css/bootstrap.flatly.min.css">
    <link rel="stylesheet" href="./css/site.css">


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#" id="cityline-bg">hackMGM</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <form class="navbar-form navbar-right">
                <div class="form-group">
                    <input type="text" placeholder="Email" class="form-control">
                </div>
                <div class="form-group">
                    <input type="password" placeholder="Password" class="form-control">
                </div>
                <button type="submit" class="btn btn-success">Sign in</button>
            </form>
        </div><!--/.navbar-collapse -->
    </div>
</nav>

<!-- Main jumbotron for a primary marketing message or call to action -->
<div id="heroimage">
    <div class="jumbotron">
        <div class="container">
            <img src="assests/images/logo.png">
            <p id="tag-line">We're a community of creatives, makers, developers and doers, working together to build a
                better MGM.</p>
            <p><a class="btn btn-primary btn-lg" href="#" role="button">Learn more &raquo;</a></p>
        </div>
    </div>
</div>

<div class="container">
    <!-- Example row of columns -->
    <div class="row">
        <div class="col-md-8">
            <div class="row">
                <div class="col-md-6">
                    <div id="upcomingList">
                        <div class="media">
                            <div class="media-left media-middle">
                                <span class="glyphicon glyphicon-calendar"></span>
                            </div>
                            <div class="media-body">
                                <!--
                                <h4 class="media-heading">hackMGM/CfA - Keeping the Ball Rolling</h4>
                                <h5><em>Date:</em>&nbsp; 3/23/2017 &nbsp; 6:00 - 7:15pm</h5>
                                -->
                                <h4 class="media-heading">3/23/2017&nbsp;6:00 - 7:15pm</h4>
                                <h5><a target="_blank" href="https://www.meetup.com/hackMGM/events/238267716/">hackMGM/CfA
                                    - Another Meetup</a></h5>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <h2>Join Our Meetup</h2>
                    <img class="img-responsive center-block" id="meetup-swarm" src="assests/images/logo--mSwarm.svg">
                    <p><a class="btn btn-default" href="#" role="button">Join Us &raquo;</a></p>
                </div>
            </div>
            <div class="row">
                TODO
            </div>
        </div>
        <div class="col-md-4">
            <!-- <div class="hashtag"><a class="hashtag-link" href="https://twitter.com/#hackmgm">#hackmgm</a>
            </div> -->
            <a class="twitter-timeline" href="https://twitter.com/hashtag/hackmgm" data-widget-id="769604737712984065">#hackmgm
                Tweets</a>
            <script>!function (d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https';
                if (!d.getElementById(id)) {
                    js = d.createElement(s);
                    js.id = id;
                    js.src = p + "://platform.twitter.com/widgets.js";
                    fjs.parentNode.insertBefore(js, fjs);
                }
            }(document, "script", "twitter-wjs");</script>

        </div>

    </div>
</div>

<hr>

<footer>
    <p>&copy; 2016 Company, Inc.</p>
</footer>
</div> <!-- /container -->

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>

<script>


    var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

    var addLeadingZero = function (num) {
        return (num < 10) ? ('0' + num) : num;
    };
    var getFormattedDate = function (millis) {
        var date = new Date(millis);
        return months[date.getMonth()] + ' ' + addLeadingZero(date.getDate()) + ', ' + date.getFullYear().toString();
    };
    var getFormattedTime = function (millis) {
        var time = new Date(millis),
            hours = time.getHours(),
            min = time.getMinutes(),
            ampm = (hours > 11) ? 'PM' : 'AM';
        min = (min < 10) ? ('0' + min) : min;
        hours = (hours == 0) ? 1 : hours;
        hours = (hours > 12) ? hours - 12 : hours;
        return hours + ':' + min + ' ' + ampm;
    };
    var numberFormat = function (nStr) {
        nStr += '';
        x = nStr.split('.');
        x1 = x[0];
        x2 = x.length > 1 ? '.' + x[1] : '';
        var rgx = /(\d+)(\d{3})/;
        while (rgx.test(x1))
            x1 = x1.replace(rgx, '$1' + ',' + '$2');
        return x1 + x2;
    };

    function handleException(request, message,
                             error) {
        var msg = "";
        msg += "Code: " + request.status + "\n";
        msg += "Text: " + request.statusText + "\n";
        if (request.responseJSON != null) {
            msg += "Message" +
                request.responseJSON.Message + "\n";
        }
        alert(msg);
    }

    function eventBuildTableRow(event) {

        var ret =
            '<div class="media">' +
            '<div class="media-left media-middle">' +
            '<span class="glyphicon glyphicon-calendar"></span>' +
            '</div>' +
            '<div class="media-body">' +
            '<h4 class="media-heading">' + getFormattedDate(event.time) + '&nbsp;' + getFormattedTime(event.time) + '</h4>' +
            '<h5><a target="_blank" href="' + event.event_url + '">' + event.name + '</a></h5>' +
            '</div>' +
            '</div>';
        console.log(ret);
        return ret;
    }

    function eventAddRow(event) {
        //   console.log(event);
        // Check if <tbody> tag exists, add one if not
        if ($("#upcomingList tbody").length == 0) {
            $("#upcomingList").append("<tbody></tbody>");
        }
        // Append row to <table>
        $("#upcomingList").append(
            eventBuildTableRow(event));
    }

    function eventListSuccess(events) {
        console.log(events.results);
        // Iterate over the collection of data
        $.each(events.results, function (index, event) {
            // Add a row to the Product table
            eventAddRow(event);
        });
    }

    function upcomingEvents() {
        // Call Web API to get a list of Product
        $.ajax({
            url: 'https://api.meetup.com/2/events?offset=0&format=json&limited_events=False&group_urlname=hackMGM&photo-host=public&page=20&fields=&order=time&desc=false&status=upcoming&sig_id=2762521&sig=7247cf51b0fc8de4161591c7a36cb5672a89aced',
            type: 'GET',
            dataType: 'jsonp',
            success: function (events) {
                eventListSuccess(events);
            },
            error: function (request, message, error) {
                handleException(request, message, error);
            }
        });
    }


    function groupStatsSuccess(stats) {
//console.log(stats.results[0]);
        console.log(stats.results[0].members);
        console.log(stats.results[0].who);

        console.log(stats.results[0].description);
    }

    function groupStats() {
        // Call Web API to get a list of Product
        $.ajax({
            url: 'https://api.meetup.com/2/groups?offset=0&format=json&group_urlname=hackmgm&photo-host=public&page=20&radius=25.0&fields=&order=id&desc=false&sig_id=2762521&sig=16892790d4bbc81b4f4c02be002e220d3b036f42',
            type: 'GET',
            dataType: 'jsonp',
            success: function (group_stats) {
                groupStatsSuccess(group_stats);
            },
            error: function (request, message, error) {
                handleException(request, message, error);
            }
        });
    }

    $(document).ready(function () {
        upcomingEvents();
        groupStats();
    });
</script>
</body>
</html>

